<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—à–∏–∫ | –ë–ê–°–¢–Ü–û–ù-–ë–¶</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = { 
            theme: { 
                extend: { 
                    colors: { 
                        brand: { dark: '#0047ab', gold: '#d4af37', gray: '#333333', light: '#f4f4f4' }
                    }, 
                    fontFamily: { sans: ['"Open Sans"', 'sans-serif'], heading: ['"Montserrat"', 'sans-serif'] } 
                } 
            } 
        }
    </script>
    <style>
        body { background-image: url('https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=2070&auto=format&fit=crop'); background-size: cover; background-position: center; background-attachment: fixed; }
        .fade-in { animation: fadeIn 0.6s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .form-input {
            width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 0.5rem; outline: none; transition: all 0.3s;
            background-color: white; color: #1a202c;
        }
        .form-input:focus { border-color: #0047ab; box-shadow: 0 0 0 3px rgba(0, 71, 171, 0.1); }
        .nav-link.active { color: #d4af37; border-bottom: 2px solid #d4af37; }
    </style>
</head>
<body class="font-sans text-gray-800 flex flex-col min-h-screen">

    <nav class="fixed w-full z-50 bg-brand-dark/95 backdrop-blur-sm text-white shadow-lg">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-xl md:text-2xl font-heading font-bold tracking-wider flex items-center gap-2">
                <img src="images/logo.png" alt="BASTION-BC LOGO" class="h-12 md:h-16 w-auto object-contain">
            </a>
    
            <div class="hidden md:flex items-center space-x-6 text-sm font-semibold uppercase tracking-wide">
                <a href="index.html" class="nav-link hover:text-brand-gold transition pb-1">–ì–æ–ª–æ–≤–Ω–∞</a>
                <a href="about.html" class="nav-link hover:text-brand-gold transition pb-1">–ü—Ä–æ –Ω–∞—Å</a>
                <a href="catalog.html" class="nav-link hover:text-brand-gold transition pb-1">–ö–∞—Ç–∞–ª–æ–≥</a>
                <a href="constructives.html" class="nav-link hover:text-brand-gold transition pb-1">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–∏</a>
                <a href="contacts.html" class="nav-link hover:text-brand-gold transition pb-1">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
    
                <div class="h-6 w-px bg-white/20 mx-2"></div>
    
                <a href="tel:+380671032400" class="flex items-center gap-2 hover:text-brand-gold transition normal-case">
                    <i class="fa-solid fa-phone text-brand-gold"></i>
                    <span class="font-bold whitespace-nowrap">067 103 24 00</span>
                </a>
    
                <a href="cart.html" class="text-brand-gold transition text-lg relative" title="–ö–æ—à–∏–∫">
                    <i class="fa-solid fa-cart-shopping scale-110"></i>
                    <span id="cart-badge-desktop" class="absolute -top-2 -right-2 bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded-full hidden">0</span>
                </a>
    
                <a href="dealers.html" class="border border-brand-gold text-brand-gold px-4 py-1 rounded hover:bg-brand-gold hover:text-white transition">–î–ª—è –¥–∏–ª–µ—Ä—ñ–≤</a>
            </div>
    
            <div class="flex items-center gap-4 md:hidden">
                <a href="cart.html" class="text-xl focus:outline-none text-brand-gold relative">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <span id="cart-badge-mobile" class="absolute -top-2 -right-2 bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded-full hidden">0</span>
                </a>
                <button id="mobile-menu-btn" class="text-2xl focus:outline-none p-2"><i class="fa-solid fa-bars"></i></button>
            </div>
        </div>
    
        <div id="mobile-menu" class="hidden md:hidden bg-brand-dark border-t border-white/10 absolute w-full top-full left-0 shadow-2xl">
            <a href="index.html" class="block py-4 px-6 hover:bg-white/10 border-b border-white/10 text-lg">–ì–æ–ª–æ–≤–Ω–∞</a>
            <a href="about.html" class="block py-4 px-6 hover:bg-white/10 border-b border-white/10 text-lg">–ü—Ä–æ –Ω–∞—Å</a>
            <a href="catalog.html" class="block py-4 px-6 hover:bg-white/10 border-b border-white/10 text-lg">–ö–∞—Ç–∞–ª–æ–≥</a>
            <a href="constructives.html" class="block py-4 px-6 hover:bg-white/10 border-b border-white/10 text-lg">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–∏</a>
            <a href="contacts.html" class="block py-4 px-6 hover:bg-white/10 border-b border-white/10 text-lg">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
            <a href="tel:+380671032400" class="block py-4 px-6 text-brand-gold font-bold"><i class="fa-solid fa-phone mr-2"></i> 067 103 24 00</a>
        </div>
    </nav>

    <div class="h-[72px] md:h-[88px]"></div>

    <main class="flex-grow container mx-auto px-4 py-8 md:py-12 fade-in">
        <h1 class="text-3xl md:text-4xl font-heading font-bold text-white text-center mb-10 drop-shadow-md">–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h1>

        <div class="flex flex-col lg:flex-row gap-8">
            <div class="lg:w-2/3">
                <div class="bg-white rounded-xl shadow-xl overflow-hidden">
                    <div class="p-6 border-b border-gray-100 bg-gray-50 flex justify-between items-center">
                        <h2 class="text-xl font-bold text-gray-800">–í–∞—à –∫–æ—à–∏–∫</h2>
                        <span id="items-count-label" class="text-sm text-gray-500 font-semibold">0 —Ç–æ–≤–∞—Ä—ñ–≤</span>
                    </div>
                    <div id="cart-items-container" class="p-6 space-y-6">
                        </div>
                    <div id="empty-cart-message" class="hidden p-16 text-center">
                        <i class="fa-solid fa-basket-shopping text-6xl text-gray-300 mb-4 block"></i>
                        <p class="text-xl text-gray-500 mb-6">–í–∞—à –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π</p>
                        <a href="catalog.html" class="inline-block bg-brand-dark text-white px-8 py-3 rounded-lg hover:bg-blue-800 transition shadow-lg">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É</a>
                    </div>
                </div>
            </div>

            <div class="lg:w-1/3">
                <div class="bg-white rounded-xl shadow-xl p-6 sticky top-24">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">–î–∞–Ω—ñ –∑–∞–º–æ–≤–Ω–∏–∫–∞</h2>
                    
                    <form id="checkout-form">
                        <div class="space-y-4 mb-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-600 mb-1">–Ü–º'—è —Ç–∞ –ü—Ä—ñ–∑–≤–∏—â–µ</label>
                                <input type="text" id="client-name" required placeholder="–í–∞—à–µ —ñ–º'—è" class="form-input">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-600 mb-1">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É</label>
                                <input type="tel" id="client-phone" required placeholder="+380..." class="form-input">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-600 mb-1">–°–ø–æ—Å—ñ–± –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                                <select id="delivery-method" class="form-input">
                                    <option value="–°–∞–º–æ–≤–∏–≤—ñ–∑">–°–∞–º–æ–≤–∏–≤—ñ–∑ (–ë—ñ–ª–∞ –¶–µ—Ä–∫–≤–∞)</option>
                                    <option value="–ù–æ–≤–∞ –ü–æ—à—Ç–∞">–ù–æ–≤–∞ –ü–æ—à—Ç–∞</option>
                                    
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-600 mb-1">–ö–æ–º–µ–Ω—Ç–∞—Ä</label>
                                <textarea id="client-comment" rows="3" placeholder="–î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–±–∞–∂–∞–Ω–Ω—è..." class="form-input"></textarea>
                            </div>
                        </div>

                        <div class="border-t border-dashed border-gray-300 py-4 mb-4">
                            <div class="flex justify-between items-center font-bold text-gray-800">
                                <span class="text-lg">–†–∞–∑–æ–º –¥–æ —Å–ø–ª–∞—Ç–∏:</span>
                                <span id="total-price" class="text-2xl text-brand-dark">0 –≥—Ä–Ω</span>
                            </div>
                        </div>

                        <button type="submit" id="submit-btn" class="w-full bg-brand-gold hover:bg-yellow-600 text-white font-bold py-4 rounded-xl shadow-lg transition transform hover:-translate-y-1 text-lg active:scale-95 disabled:bg-gray-400 disabled:cursor-not-allowed">
                            –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </main>

       <footer class="mt-auto bg-brand-dark text-gray-300 py-8 md:py-12 border-t border-white/10 relative z-10">
        <div class="container mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <a href="index.html" class="text-xl font-bold text-white flex items-center gap-2 mb-4"></a>
                <img src="images/logo.png" alt="BASTION-BC LOGO" class="h-12 md:h-16 w-auto object-contain">
            </div>
            <div>
                <h4 class="text-white font-bold mb-4">–ú–µ–Ω—é</h4>
                <ul class="space-y-2 text-sm">
                    <li><a href="about.html" class="hover:text-brand-gold">–ü—Ä–æ –Ω–∞—Å</a></li>
                    <li><a href="catalog.html" class="hover:text-brand-gold">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                    <li><a href="dealers.html" class="hover:text-brand-gold">–°–ø—ñ–≤–ø—Ä–∞—Ü—è</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-white font-bold mb-4">–ö–æ–Ω—Ç–∞–∫—Ç–∏</h4>
                <p class="text-sm">—Å. –§—É—Ä—Å–∏, –≤—É–ª. –ü—Ä–æ–º–∏—Å–ª–æ–≤–∞, 22</p>
                <p class="text-sm">068 968 32 32</p>
            </div>
            <div>
                <h4 class="text-white font-bold mb-4">–°–æ—Ü–º–µ—Ä–µ–∂—ñ</h4>
                <div class="flex space-x-4">
                   <a href="https://www.facebook.com/dveribastionbc" target="_blank" class="text-white hover:text-brand-gold transition-colors">
            <i class="fa-brands fa-facebook-f"></i>
        </a>
        <a href="https://www.instagram.com/dveri_bastionbc/" target="_blank" class="text-white hover:text-brand-gold transition-colors">
            <i class="fa-brands fa-instagram"></i>
        </a>
        <a href="https://www.tiktok.com/@bastionbc?is_from_webapp=1&sender_device=pc" target="_blank" class="text-white hover:text-brand-gold transition-colors">
            <i class="fa-brands fa-tiktok"></i>
        </a>
        <a href="https://www.youtube.com/@%D0%94%D0%92%D0%95%D0%A0%D0%86-%D0%91%D0%90%D0%A1%D0%A2%D0%86%D0%9E%D0%9D-%D0%91%D0%A6" target="_blank" class="text-white hover:text-brand-gold transition-colors">
            <i class="fa-brands fa-youtube"></i>
        </a>
                </div>
            </div>
        </div>
        <div class="container mx-auto px-6 text-center text-sm border-t border-white/10 pt-6 mt-8 text-gray-400">&copy; 2026 –ë–ê–°–¢–Ü–û–ù-–ë–¶.</div>
    </footer>

  
       <script>
    // --- –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø ---
    const TG_BOT_TOKEN = '8551093026:AAE21jxzu3g2bSnIzBJHvXZS3_K0soZZPVA';
    const TG_CHAT_ID = '1266321063';

    let cart = JSON.parse(localStorage.getItem('myCart')) || [];

    // --- –ì–ï–ù–ï–†–ê–¶–Ü–Ø –ù–û–ú–ï–†–ê –ó–ê–ú–û–í–õ–ï–ù–ù–Ø ---
    function generateOrderNumber() {
        const now = new Date();
        const datePart = `${now.getDate().toString().padStart(2, '0')}${(now.getMonth() + 1).toString().padStart(2, '0')}`;
        const randomPart = Math.floor(100 + Math.random() * 900); // 3 –≤–∏–ø–∞–¥–∫–æ–≤—ñ —Ü–∏—Ñ—Ä–∏
        return `${datePart}-${randomPart}`;
    }

    // --- –í–Ü–î–û–ë–†–ê–ñ–ï–ù–ù–Ø –ö–û–®–ò–ö–ê ---
    function renderCart() {
        const container = document.getElementById('cart-items-container');
        const emptyMsg = document.getElementById('empty-cart-message');
        const countLabel = document.getElementById('items-count-label');
        const totalLabel = document.getElementById('total-price');
        const submitBtn = document.getElementById('submit-btn');

        if (!container) return;
        container.innerHTML = '';
        let total = 0;
        let count = 0;

        if (cart.length === 0) {
            container.classList.add('hidden');
            emptyMsg.classList.remove('hidden');
            totalLabel.innerText = "0 –≥—Ä–Ω";
            countLabel.innerText = "0 —Ç–æ–≤–∞—Ä—ñ–≤";
            if(submitBtn) submitBtn.disabled = true;
            updateBadges(0);
            return;
        }

        container.classList.remove('hidden');
        emptyMsg.classList.add('hidden');
        if(submitBtn) submitBtn.disabled = false;

        cart.forEach((item, index) => {
            total += item.price * item.quantity;
            count += item.quantity;

            container.innerHTML += `
            <div class="flex flex-col sm:flex-row items-center gap-4 py-4 border-b border-gray-100 last:border-0">
                <img src="${item.image}" class="w-20 h-20 object-contain bg-gray-50 rounded p-1" onerror="this.src='https://placehold.co/100?text=No+Image'">
                <div class="flex-grow text-center sm:text-left">
                    <h3 class="font-bold text-gray-800">${item.name}</h3>
                    <p class="text-brand-dark font-semibold">${item.price} –≥—Ä–Ω</p>
                </div>
                <div class="flex items-center gap-3">
                    <button onclick="changeQty(${index}, -1)" class="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 font-bold">-</button>
                    <span class="font-bold w-4 text-center">${item.quantity}</span>
                    <button onclick="changeQty(${index}, 1)" class="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 font-bold">+</button>
                </div>
                <div class="text-right min-w-[100px] font-bold text-lg">${item.price * item.quantity} –≥—Ä–Ω</div>
                <button onclick="removeItem(${index})" class="text-gray-400 hover:text-red-500 p-2"><i class="fa-solid fa-trash"></i></button>
            </div>`;
        });

        totalLabel.innerText = total.toLocaleString() + " –≥—Ä–Ω";
        countLabel.innerText = count + " —Ç–æ–≤–∞—Ä—ñ–≤";
        updateBadges(count);
    }

    // --- –§–£–ù–ö–¶–Ü–á –ö–ï–†–£–í–ê–ù–ù–Ø ---
    window.changeQty = (index, delta) => {
        cart[index].quantity += delta;
        if (cart[index].quantity < 1) cart[index].quantity = 1;
        saveAndRefresh();
    };

    window.removeItem = (index) => {
        if (confirm('–í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π —Ç–æ–≤–∞—Ä?')) {
            cart.splice(index, 1);
            saveAndRefresh();
        }
    };

    function saveAndRefresh() {
        localStorage.setItem('myCart', JSON.stringify(cart));
        renderCart();
    }

    function updateBadges(count) {
        const b1 = document.getElementById('cart-badge-desktop');
        const b2 = document.getElementById('cart-badge-mobile');
        [b1, b2].forEach(b => {
            if (b) {
                b.innerText = count;
                count > 0 ? b.classList.remove('hidden') : b.classList.add('hidden');
            }
        });
    }

    // --- –í–Ü–î–ü–†–ê–í–ö–ê –ó–ê–ú–û–í–õ–ï–ù–ù–Ø ---
    document.getElementById('checkout-form')?.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const btn = document.getElementById('submit-btn');
        btn.innerText = "–í—ñ–¥–ø—Ä–∞–≤–∫–∞...";
        btn.disabled = true;

        const orderID = generateOrderNumber(); // –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–º–µ—Ä
        const name = document.getElementById('client-name').value;
        const phone = document.getElementById('client-phone').value;
        const delivery = document.getElementById('delivery-method').value;
        const comment = document.getElementById('client-comment').value;

        let text = `<b>üÜï –ó–ê–ú–û–í–õ–ï–ù–ù–Ø ‚Ññ${orderID}</b>\n\n`;
        text += `üë§ <b>–ö–ª—ñ—î–Ω—Ç:</b> ${name}\n`;
        text += `üìû <b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> ${phone}\n`;
        text += `üöö <b>–î–æ—Å—Ç–∞–≤–∫–∞:</b> ${delivery}\n`;
        if(comment) text += `üí¨ <b>–ö–æ–º–µ–Ω—Ç–∞—Ä:</b> ${comment}\n\n`;
        text += `üõí <b>–¢–æ–≤–∞—Ä–∏:</b>\n`;

        let total = 0;
        cart.forEach(item => {
            text += `‚Ä¢ ${item.name} (x${item.quantity}) ‚Äî ${item.price * item.quantity} –≥—Ä–Ω\n`;
            total += item.price * item.quantity;
        });
        text += `\nüí∞ <b>–ó–ê–ì–ê–õ–û–ú: ${total} –≥—Ä–Ω</b>`;

        try {
            const response = await fetch(`https://api.telegram.org/bot${TG_BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: TG_CHAT_ID, text: text, parse_mode: 'HTML' })
            });

            if (response.ok) {
                alert(`–î—è–∫—É—î–º–æ! –í–∞—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Ññ${orderID} –ø—Ä–∏–π–Ω—è—Ç–æ. –û—á—ñ–∫—É–π—Ç–µ –Ω–∞ –¥–∑–≤—ñ–Ω–æ–∫.`);
                cart = [];
                saveAndRefresh();
                e.target.reset();
            } else {
                throw new Error();
            }
        } catch (err) {
            alert('–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ. –ó–≤‚Äô—è–∂—ñ—Ç—å—Å—è –∑ –Ω–∞–º–∏ –∑–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º.');
        } finally {
            btn.innerText = "–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è";
            btn.disabled = false;
        }
    });

    // –ú–æ–±—ñ–ª—å–Ω–µ –º–µ–Ω—é
    document.getElementById('mobile-menu-btn')?.addEventListener('click', () => {
        document.getElementById('mobile-menu')?.classList.toggle('hidden');
    });

    document.addEventListener('DOMContentLoaded', renderCart);
</script>
</body>
</html>